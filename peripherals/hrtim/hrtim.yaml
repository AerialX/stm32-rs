# HRTIM as found on STM32F3x4 and STM32H7

HRTIM_Common:
  CR1:
    "AD?USRC":
      Master: [0, "ADC trigger update from master timer"]
      TimerA: [1, "ADC trigger update from timer A"]
      TimerB: [2, "ADC trigger update from timer B"]
      TimerC: [3, "ADC trigger update from timer C"]
      TimerD: [4, "ADC trigger update from timer D"]
      TimerE: [5, "ADC trigger update from timer E"]
    "T?UDIS,MUDIS":
      Enabled: [0, "Timer update enabled"]
      Disabled: [1, "Timer update disabled"]
  CR2:
    "T?RST,MRST":
      Reset: [1, "Reset timer"]
    "T?SWU,MSWU":
      Update: [1, "Force immediate update"]
  ISR:
    BMPER:
      _read:
        NoEvent: [0, "No burst mode period interrupt occurred"]
        Event: [1, "Burst mode period interrupt occured"]
      _write:
        Clear: [1, "Clear burst mode period interrupt"]
    DLLRDY:
      _read:
        NoEvent: [0, "No DLL calibration ready interrupt occurred"]
        Event: [1, "DLL calibration ready interrupt occurred"]
      _write:
        Clear: [1, "Clear DLL calibration interrupt"]
    "SYSFLT,FLT?":
      _read:
        NoEvent: [0, "No fault interrupt occurred"]
        Event: [1, "Fault interrupt occurred"]
      _write:
        Clear: [1, "Clear fault interrupt"]
  ICR:
    BMPERC:
      Clear: [1, "Clears BMPER flag"]
    DLLRDYC:
      Clear: [1, "Clears DLL ready flag"]
    "SYSFLTC,FLT?C":
      Clear: [1, "Clears fault flag"]
  IER:
    BMPERIE:
      Disabled: [0, "Burst mode period interrupt disabled"]
      Enabled: [1, "Burst mode period interrupt enabled"]
    DLLRDYIE:
      Disabled: [0, "DLL ready interrupt disabled"]
      Enabled: [1, "DLL Ready interrupt enabled"]
    "SYSFLTIE,FLT?IE":
      Disabled: [0, "Fault interrupt disabled"]
      Enabled: [1, "Fault interrupt enabled"]
  OENR:
    "T[ABCDE][12]OEN":
      _read:
        Disabled: [0, "Output disabled"]
        Enabled: [1, "Output enabled"]
      _write:
        Enable: [1, "Enable output"]
  ODISR:
    "T[ABCDE][12]ODIS":
      Disable: [1, "Disable output"]
  ODSR:
    "T[ABCDE][12]ODS":
      Idle: [0, "Output disabled in idle state"]
      Fault: [1, "Output disabled in fault state"]
  BMCR:
    BMSTAT:
      _read:
        Normal: [0, "Normal operation"]
        Burst: [1, "Burst operation ongoing"]
      _write:
        Cancel: [0, "Terminate burst mode"]
    "T[ABCDE]M,MTBM":
      Normal: [0, "Counter clock is maintained and timer operates normally"]
      Stopped: [1, "Counter clock is stopped and counter is reset"]
    BMPREN:
      Disabled: [0, "Preload disabled: the write access is directly done into active registers"]
      Enabled: [1, "Preload enabled: the write access is done into preload registers"]
    BMPRSC:
      Div1: [0, "Clock not divided"]
      Div2: [1, "Division by 2"]
      Div4: [2, "Division by 4"]
      Div8: [3, "Division by 8"]
      Div16: [4, "Division by 16"]
      Div32: [5, "Division by 32"]
      Div64: [6, "Division by 64"]
      Div128: [7, "Division by 128"]
      Div256: [8, "Division by 256"]
      Div512: [9, "Division by 512"]
      Div1024: [10, "Division by 1024"]
      Div2048: [11, "Division by 2048"]
      Div4096: [12, "Division by 4096"]
      Div8192: [13, "Division by 8192"]
      Div16384: [14, "Division by 16384"]
      Div32768: [15, "Division by 32768"]
    BMCLK:
      Master: [0, "Master timer reset/roll-over"]
      TimerA: [1, "Timer A counter reset/roll-over"]
      TimerB: [2, "Timer B counter reset/roll-over"]
      TimerC: [3, "Timer C counter reset/roll-over"]
      TimerD: [4, "Timer D counter reset/roll-over"]
      TimerE: [5, "Timer E counter reset/roll-over"]
      Event1: [6, "On-chip Event 1 (BMClk[1]), acting as a burst mode counter clock"]
      Event2: [7, "On-chip Event 2 (BMClk[2]), acting as a burst mode counter clock"]
      Event3: [8, "On-chip Event 3 (BMClk[3]), acting as a burst mode counter clock"]
      Event4: [9, "On-chip Event 4 (BMClk[4]), acting as a burst mode counter clock"]
      Clock: [10, "Prescaled f_HRTIM clock (as per BMPRSC[3:0] setting"]
    BMOM:
      SingleShot: [0, "Single-shot mode"]
      Continuous: [1, "Continuous operation"]
    BME:
      Disabled: [0, "Burst mode disabled"]
      Enabled: [1, "Burst mode enabled"]
  BMCMPR:
    BMCMP: [0, 0xFFFF]
  BMPER:
    BMPER: [0, 0xFFFF]
  EECR1:
    "EE*FAST":
      Resynchronized: [0, "External event is re-synchronised by the HRTIM logic before acting on outputs"]
      Asynchronous: [1, "External event is acting asynchronously on outputs (low-latency mode)"]
  "EECR[12]":
    "EE*SNS":
      Active: [0, "On active level defined by EExPOL bit"]
      Rising: [1, "Rising edge"]
      Falling: [2, "Falling edge"]
      Both: [3, "Both edges"]
    "EE*POL":
      ActiveHigh: [0, "External event is active high"]
      ActiveLow: [1, "External event is active low"]
    "EE*SRC":
      Src1: [0, "Source 1"]
      Src2: [1, "Source 2"]
      Src3: [2, "Source 3"]
      Src4: [3, "Source 4"]
  EECR3:
    EEVSD:
      Div1: [0, "f_EEVS=f_HRTIM"]
      Div2: [1, "f_EEVS=f_HRTIM/2"]
      Div4: [2, "f_EEVS=f_HRTIM/4"]
      Div8: [3, "f_EEVS=f_HRTIM/8"]
    "EE*F":
      Disabled: [0, "Filter disabled"]
      Div1_N2:  [1, "f_SAMPLING=f_HRTIM, N=2"]
      Div1_N4:  [2, "f_SAMPLING=f_HRTIM, N=4"]
      Div1_N8:  [3, "f_SAMPLING=f_HRTIM, N=8"]
      Div2_N6:  [4, "f_SAMPLING=f_HRTIM/2, N=6"]
      Div2_N8:  [5, "f_SAMPLING=f_HRTIM/2, N=8"]
      Div4_N6:  [6, "f_SAMPLING=f_HRTIM/4, N=6"]
      Div4_N8:  [7, "f_SAMPLING=f_HRTIM/4, N=8"]
      Div8_N6:  [8, "f_SAMPLING=f_HRTIM/8, N=6"]
      Div8_N8:  [9, "f_SAMPLING=f_HRTIM/8, N=8"]
      Div16_N5: [10, "f_SAMPLING=f_HRTIM/16, N=5"]
      Div16_N6: [11, "f_SAMPLING=f_HRTIM/16, N=6"]
      Div16_N8: [12, "f_SAMPLING=f_HRTIM/16, N=8"]
      Div32_N5: [13, "f_SAMPLING=f_HRTIM/32, N=5"]
      Div32_N6: [14, "f_SAMPLING=f_HRTIM/32, N=6"]
      Div32_N8: [15, "f_SAMPLING=f_HRTIM/32, N=8"]
  "ADC[1234]R":
    "AD*RST":
      Disabled: [0, "No generation of ADC trigger on timer reset and roll-over"]
      Enabled: [1, "Generation of ADC trigger on timer reset and roll-over"]
    "AD*PER":
      Disabled: [0, "No generation of ADC trigger on timer period event"]
      Enabled: [1, "Generation of ADC trigger on timer period event"]
    "AD*T*C[234]":
      Disabled: [0, "No generation of ADC trigger on timer compare event"]
      Enabled: [1, "Generation of ADC trigger on timer compare event"]
    "AD*EV*":
      Disabled: [0, "No generation of ADC trigger on external event"]
      Enabled: [1, "Generation of ADC trigger on external event"]
    "AD*MC*":
      Disabled: [0, "No generation of ADC trigger on master compare event"]
      Enabled: [1, "Generation of ADC trigger on master compare event"]
  DLLCR:
    CALRTE:
      Millis7_3: [0, "1048576*t_HRTIM (7.3ms)"]
      Micros910: [1, "131072*t_HRTIM (910µs)"]
      Micros114: [2, "16384*t_HRTIM (114µs)"]
      Micros14: [3, "2048*t_HRTIM (14µs)"]
    CALEN:
      Disabled: [0, "Periodic calibration disabled"]
      Enabled: [1, "Calibration is performed periodically, as per CALRTE setting"]
    CAL:
      Start: [1, "Calibration start"]
  "FLTINR[12]":
    "FLT[12345]LCK":
      _read:
        Unlocked: [0, "Fault bits are read/write"]
        Locked: [1, "Fault bits are read-only"]
      _write:
        Lock: [1, "Lock corresponding fault bits"]
    "FLT[12345]F":
      Disabled: [0, "No filter, FLTx acts asynchronously"]
      Div1_N2:  [1, "f_SAMPLING=f_HRTIM, N=2"]
      Div1_N4:  [2, "f_SAMPLING=f_HRTIM, N=4"]
      Div1_N8:  [3, "f_SAMPLING=f_HRTIM, N=8"]
      Div2_N6:  [4, "f_SAMPLING=f_HRTIM/2, N=6"]
      Div2_N8:  [5, "f_SAMPLING=f_HRTIM/2, N=8"]
      Div4_N6:  [6, "f_SAMPLING=f_HRTIM/4, N=6"]
      Div4_N8:  [7, "f_SAMPLING=f_HRTIM/4, N=8"]
      Div8_N6:  [8, "f_SAMPLING=f_HRTIM/8, N=6"]
      Div8_N8:  [9, "f_SAMPLING=f_HRTIM/8, N=8"]
      Div16_N5: [10, "f_SAMPLING=f_HRTIM/16, N=5"]
      Div16_N6: [11, "f_SAMPLING=f_HRTIM/16, N=6"]
      Div16_N8: [12, "f_SAMPLING=f_HRTIM/16, N=8"]
      Div32_N5: [13, "f_SAMPLING=f_HRTIM/32, N=5"]
      Div32_N6: [14, "f_SAMPLING=f_HRTIM/32, N=6"]
      Div32_N8: [15, "f_SAMPLING=f_HRTIM/32, N=8"]
    "FLT[12345]SRC":
      Input: [0, "Fault input is FLTx input pin"]
      Internal: [1, "Fault input is FLTn_Int signal"]
    "FLT[12345]P":
      ActiveLow: [0, "Fault input is active low"]
      ActiveHigh: [1, "Fault input is active high"]
    "FLT[12345]E":
      Disabled: [0, "Fault input disabled"]
      Enabled: [1, "Fault input enabled"]
  FLTINR2:
    FLTSD:
      Div1: [0, "f_FLTS=f_HRTIM"]
      Div2: [1, "f_FLTS=f_HRTIM/2"]
      Div4: [2, "f_FLTS=f_HRTIM/4"]
      Div8: [3, "f_FLTS=f_HRTIM/8"]
  BDMUPR:
    "M*":
      NotUpdated: [0, "Register not updated by burst DMA access"]
      Updated: [1, "Register updated by burst DMA access"]
  "BDT?UPR":
    "TIM*":
      NotUpdated: [0, "Register not updated by burst DMA access"]
      Updated: [1, "Register updated by burst DMA access"]
  BDMADR:
    BDMADR: [0, 0xFFFFFFFF]

HRTIM_Master:
  MCR:
    BRSTDMA:
      Independent: [0, "Update done independently from the DMA burst transfer completion"]
      Completion: [1, "Update done when the DMA burst transfer is completed"]
      Rollover: [2, "Update done on master timer roll-over following a DMA burst transfer completion"]
    MREPU:
      Disabled: [0, "Update on repetition disabled"]
      Enabled: [1, "Update on repetition enabled"]
    PREEN:
      Disabled: [0, "Preload disabled: the write access is directly done into the active register"]
      Enabled: [1, "Preload enabled: the write access is done into the preload register"]
    DACSYNC:
      Disabled: [0, "No DAC trigger generated"]
      DACSync1: [1, "Trigger generated on DACSync1"]
      DACSync2: [2, "Trigger generated on DACSync2"]
      DACSync3: [3, "Trigger generated on DACSync3"]
    "T[ABCDE]CEN":
      Disabled: [0, "Timer counter disabled"]
      Enabled: [1, "Timer counter enabled"]
    MCEN:
      Disabled: [0, "Master timer counter disabled"]
      Enabled: [1, "Master timer counter enabled"]
    SYNCSRC:
      MasterStart: [0, "Master timer Start"]
      MasterCompare1: [1, "Master timer Compare 1 event"]
      TimerAStart: [2, "Timer A start/reset"]
      TimerACompare1: [3, "Timer A Compare 1 event"]
    SYNCOUT:
      Disabled: [0, "Disabled"]
      PositivePulse: [2, "Positive pulse on SCOUT output (16x f_HRTIM clock cycles)"]
      NegativePulse: [3, "Negative pulse on SCOUT output (16x f_HRTIM clock cycles)"]
    SYNCSTRTM:
      Disabled: [0, "No effect on the master timer"]
      Enabled: [1, "A synchroniation input event starts the master timer"]
    SYNCRSTM:
      Disabled: [0, "No effect on the master timer"]
      Enabled: [1, "A synchroniation input event resets the master timer"]
    SYNCIN:
      Disabled: [0, "Disabled. HRTIM is not synchronized and runs in standalone mode"]
      Internal: [2, "Internal event: the HRTIM is synchronized with the on-chip timer"]
      External: [3, "External event: a positive pulse on HRTIM_SCIN input triggers the HRTIM"]
    HALF:
      Disabled: [0, "Half mode disabled"]
      Enabled: [1, "Half mode enabled"]
    RETRIG:
      Disabled: [0, "The timer is not re-triggerable: a counter reset can be done only if the counter is stopped"]
      Enabled: [1, "The timer is retriggerable: a counter reset is done whatever the counter state"]
    CONT:
      SingleShot: [0, "The timer operates in single-shot mode and stops when it reaches the MPER value"]
      Continuous: [1, "The timer operates in continuous (free-running) mode and rolls over to zero when it reaches the MPER value"]
    CKPSC: [0, 7]
  MISR:
    MUPD:
      NoEvent: [0, "No master update interrupt occurred"]
      Event: [1, "Master update interrupt occurred"]
    SYNC:
      NoEvent: [0, "No sync input interrupt occurred"]
      Event: [1, "Sync input interrupt occurred"]
    MREP:
      NoEvent: [0, "No master repetition interrupt occurred"]
      Event: [1, "Master repetition interrupt occurred"]
    "MCMP[1234]":
      NoEvent: [0, "No master compare interrupt occurred"]
      Event: [1, "Master compare interrupt occurred"]
  MICR:
    "M*C":
      Clear: [1, "Clears flag in MISR register"]
  MDIER:
    "M*DE":
      Disabled: [0, "DMA request disabled"]
      Enabled: [1, "DMA request enabled"]
    "M*IE":
      Disabled: [0, "Interrupt disabled"]
      Enabled: [1, "Interrupt enabled"]
  MCNTR:
    MCNT: [0, 0xFFFF]
  MPER:
    MPER: [0, 0xFFFF]
  MREP:
    MREP: [0, 0xFF]
  "MCMP[1234]R":
    "MCMP[1234]": [0, 0xFFFF]

"HRTIM_TIM[ABCDE]":
  "TIM[ABCDE]CR":
    UPDGAT:
      Independent: [0, "Update occurs independently from the DMA burst transfer"]
      DMABurst: [1, "Update occurs when the DMA burst transfer is completed"]
      DMABurst_Update: [2, "Update occurs on the update event following DMA burst transfer completion"]
      Input1: [3, "Update occurs on a rising edge of HRTIM update enable input 1"]
      Input2: [4, "Update occurs on a rising edge of HRTIM update enable input 2"]
      Input3: [5, "Update occurs on a rising edge of HRTIM update enable input 3"]
      Input1_Update: [6, "Update occurs on the update event following a rising edge of HRTIM update enable input 1"]
      Input2_Update: [7, "Update occurs on the update event following a rising edge of HRTIM update enable input 2"]
      Input3_Update: [8, "Update occurs on the update event following a rising edge of HRTIM update enable input 3"]
    PREEN:
      Disabled: [0, "Preload disabled: the write access is directly done into the active register"]
      Enabled: [1, "Preload enabled: the write access is done into the preload register"]
    DACSYNC:
      Disabled: [0, "No DAC trigger generated"]
      DACSync1: [1, "Trigger generated on DACSync1"]
      DACSync2: [2, "Trigger generated on DACSync2"]
      DACSync3: [3, "Trigger generated on DACSync3"]
    MSTU:
      Disabled: [0, "Update by master timer disabled"]
      Enabled: [1, "Update by master timer enabled"]
    "T[ABCDE]U":
      Disabled: [0, "Update by timer x disabled"]
      Enabled: [1, "Update by timer x enabled"]
    "T?RSTU":
      Disabled: [0, "Update by timer x reset/roll-over disabled"]
      Enabled: [1, "Update by timer x reset/roll-over enabled"]
    "T?REPU":
      Disabled: [0, "Update by timer x repetition disabled"]
      Enabled: [1, "Update by timer x repetition enabled"]
    DELCMP4:
      Standard: [0, "CMP4 register is always active (standard compare mode)"]
      Capture2: [1, "CMP4 is recomputed and is active following a capture 2 event"]
      Capture2_Compare1: [2, "CMP4 is recomputed and is active following a capture 2 event or a Compare 1 match"]
      Capture_Compare3: [3, "CMP4 is recomputed and is active following a capture event or a Compare 3 match"]
    DELCMP2:
      Standard: [0, "CMP2 register is always active (standard compare mode)"]
      Capture1: [1, "CMP2 is recomputed and is active following a capture 1 event"]
      Capture1_Compare1: [2, "CMP2 is recomputed and is active following a capture 1 event or a Compare 1 match"]
      Capture1_Compare3: [3, "CMP2 is recomputed and is active following a capture 1 event or a Compare 3 match"]
    SYNCSTRTx:
      Disabled: [0, "Synchronization event has no effect on Timer x"]
      Start: [1, "Synchronization event starts Timer x"]
    SYNCRSTx:
      Disabled: [0, "Synchronization event has no effect on Timer x"]
      Reset: [1, "Synchronization event resets Timer x"]
    PSHPLL:
      Disabled: [0, "Push-pull mode disabled"]
      Enabled: [1, "Push-pull mode enabled"]
    HALF:
      Disabled: [0, "Half mode disabled"]
      Enabled: [1, "Half mode enabled"]
    RETRIG:
      Disabled: [0, "The timer is not re-triggerable: a counter reset can be done only if the counter is stopped"]
      Enabled: [1, "The timer is retriggerable: a counter reset is done whatever the counter state"]
    CONT:
      SingleShot: [0, "The timer operates in single-shot mode and stops when it reaches the MPER value"]
      Continuous: [1, "The timer operates in continuous (free-running) mode and rolls over to zero when it reaches the MPER value"]
    CKPSCx: [0, 7]
